<div class="container" style="margin-top:5%" id="content"></div>

<script id="mobileTemplate" type="text/html">
	<div class="row" style="margin: 150px auto;width:75%;text-align:center;" id="mobilePrompt">
		<p>Since you're using a mobile device, and mobile devices don't support autoplay, you'll need to click once more to start the game.</p>
		<button class="btn waves-effect waves-light" type="submit" name="action" id="startMusic">Start The Music!</button>
	</div>
</script>

<script id="gameTemplate" type="text/html">
  <div class="row">
    <div class="col s12" id="content">
      <div class="center-align">
        <p class="flow-text">Name That Tune in <span id="counter">20</span> Seconds!</p>
      </div>
      <div class="left">
        <h5>Round <span id="round">1</span></h5>
      </div>
      <div class="right">
        <h5>Score <span id="score">0</span></h5>
      </div>
      <br class="u-cf" />
  </div>
  <div class="row">
    <div class="col s12" id="songsList"></div>
  </div>
</script>

<script id="songsTemplate" type="text/x-jquery-tmpl">
  <ul class="collection">
    <li class="collection-item avatar song" data-id="${id}">
      <img src="${image}" alt="" class="circle">
      <span class="title"><b>${name}</b></span>
      <p>${artist}</p>
    </li>
  </ul>
</script>

<script id="pleaseWaitTemplate" type="text/x-jquery-tmpl">
  <div class="center-align">
    <div class="progress">
      <div class="indeterminate"></div>
    </div>
  </div>
</script>

<script id="rightAnswerTemplate" type="text/x-jquery-tmpl">
  <div style="text-align:center;margin-top:5%;">
    <img src="/images/right.png" />
  </div>
</script>

<script id="wrongAnswerTemplate" type="text/x-jquery-tmpl">
  <div style="text-align:center;margin-top:5%;">
    <img src="/images/wrong.png" />
  </div>
</script>

<script>
$(document).on(
	'fbload',
	function() {
		Game.setSongs(<%=@songs.to_json%>);

		if (isMobile.any()) {
			$("#content").html($("#mobileTemplate").tmpl());
			$("#startMusic").click(function() {
				$("#content").html($("#gameTemplate").tmpl())
				Game.startRound();
			});
		} else {
			$("#content").html($("#gameTemplate").tmpl());
			Game.startRound();
		}
	}
);
</script>
